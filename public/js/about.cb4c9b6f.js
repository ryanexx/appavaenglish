(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"1dde":function(e,t,r){var a=r("d039"),o=r("b622"),n=r("2d00"),s=o("species");e.exports=function(e){return n>=51||!a((function(){var t=[],r=t.constructor={};return r[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"1e8c":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("v-row",[r("v-col",{attrs:{md:"6",cols:"12"}},[r("v-text-field",{attrs:{label:"Nombres",required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("v-col",{attrs:{md:"6",cols:"12"}},[r("v-text-field",{attrs:{label:"Apellidos",required:""},model:{value:e.form.lastname,callback:function(t){e.$set(e.form,"lastname",t)},expression:"form.lastname"}})],1)],1),r("v-row",[r("v-col",{attrs:{md:"6",cols:"12"}},[r("v-text-field",{attrs:{label:"Correo Electrónico",required:"",type:"email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),r("v-col",{attrs:{md:"6",cols:"12"}},[r("v-select",{attrs:{items:e.roles,label:"Seleccione un rol"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}})],1)],1),"post"===e.method.toLowerCase()&&"administrador"===e.form.role?r("v-row",{attrs:{justify:"space-around"}},[r("v-col",{attrs:{md:"8"}},[r("v-text-field",{attrs:{label:"Contraseña",required:"",type:e.type},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("v-col",{staticClass:"d-flex align-center justify-center",attrs:{md:"4"}},[r("v-btn",{staticClass:"mr-2",attrs:{tile:"",color:"success",type:"button"},on:{click:e.viewOrHidePw}},[r("v-icon",[e._v("mdi-eye")])],1),r("v-btn",{attrs:{tile:"",color:"indigo",type:"button",dark:""},on:{click:e.getRandomPw}},[e._v("Generar")])],1)],1):e._e(),e.error?r("v-alert",{attrs:{dense:"",type:"error"}},[e._v(" "+e._s(e.error)+" ")]):e._e(),r("v-row",{attrs:{justify:"center"}},[r("v-btn",{staticClass:"mx-md-1",attrs:{color:"primary",type:"submit",disabled:e.loader}},[e.loader?r("v-progress-circular",{staticClass:"mr-2",attrs:{size:"20",indeterminate:"",color:"white"}}):e._e(),e._v(" "+e._s("post"===this.method.toLowerCase()?"Guardar":"Actualizar")+" ")],1),e._t("default"),r("v-btn",{staticClass:"mx-md-1",attrs:{color:"red",type:"button",dark:"",to:"/person"}},[e._v("Atrás")])],2)],1)],1)},o=[],n=(r("b0c0"),r("d3b7"),{name:"UserFrm",props:{url:{type:String,default:"/register"},method:{type:String,default:"POST"},form:{type:Object,default:function(){return{name:"",lastname:"",email:"",password:"",role:"CONCEJAL"}}}},data:function(){return{type:"password",passwordLength:10,error:"",loader:!1,roles:["CONCEJAL","ADMINISTRADOR","ALCALDE","VICEALCALDE"]}},methods:{onSubmit:function(){var e=this;this.validate()&&(this.loader=!0,this.form.role=this.form.role.toUpperCase(),this.$http({method:this.method,url:this.url,data:this.form}).then((function(t){"post"===e.method.toLowerCase()?t.data&&t.data.user&&(e.$alert.ok("".concat(e.form.role.toUpperCase()," registrado con éxito")),e.clearForm()):t.data&&t.data.status&&"success"===t.data.status&&e.$alert.ok(t.data.message)})).catch((function(t){t.response&&t.response.data&&(e.error=t.response.data.message)})).finally((function(){e.loader=!1})))},validate:function(){var e=this.form;return this.error="",e.name&&e.lastname&&e.email?!(!e.password&&"post"===this.method.toLowerCase()&&"administrador"===e.role)||(this.error="Asegurese de ingresar o generar una contraseña",!1):(this.error="El nombre, apellido y correo son requeridos!",!1)},clearForm:function(){this.form.name="",this.form.lastname="",this.form.email="",this.form.role="CONCEJAL",this.form.password="",this.type="password"},viewOrHidePw:function(){"password"===this.type?this.type="text":this.type="password"},getRandomPw:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=t.length,a=0;a<this.passwordLength;a++)e+=t.charAt(Math.floor(Math.random()*r));this.form.password=e,this.type="text"}}}),s=n,i=r("2877"),l=Object(i["a"])(s,a,o,!1,null,null,null);t["a"]=l.exports},"2e99":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{style:{zIndex:e.options.zIndex},attrs:{"max-width":e.options.width},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(e._s(e.title))]),r("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!e.message,expression:"!!message"}]},[e._v(e._s(e.message))]),r("v-card-actions",{staticClass:"pt-0"},[r("v-spacer"),r("v-btn",{attrs:{color:"red",text:""},nativeOn:{click:function(t){return e.cancel(t)}}},[e._v("Cancelar")]),r("v-btn",{attrs:{color:"primary darken-1",text:""},nativeOn:{click:function(t){return e.agree(t)}}},[e._v("Aceptar")])],1)],1)],1)},o=[],n=(r("d3b7"),{data:function(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"primary",width:350,zIndex:200}}},methods:{open:function(e,t,r){var a=this;return this.dialog=!0,this.title=e,this.message=t,this.options=Object.assign(this.options,r),new Promise((function(e,t){a.resolve=e,a.reject=t}))},agree:function(){this.resolve(!0),this.dialog=!1},cancel:function(){this.resolve(!1),this.dialog=!1}}}),s=n,i=r("2877"),l=Object(i["a"])(s,a,o,!1,null,null,null);t["a"]=l.exports},"33ab":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"col-md-8 offset-md-2"},[r("v-card-text",[r("h2",[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-account-plus")]),e._v(" Crear persona")],1),r("v-divider",{staticClass:"my-3"}),r("PersonFrm")],1)],1)},o=[],n=r("1e8c"),s={name:"UserCreate",components:{PersonFrm:n["a"]},data:function(){return{}}},i=s,l=r("2877"),c=Object(l["a"])(i,a,o,!1,null,"093e212b",null);t["default"]=c.exports},"65f0":function(e,t,r){var a=r("861d"),o=r("e8b5"),n=r("b622"),s=n("species");e.exports=function(e,t){var r;return o(e)&&(r=e.constructor,"function"!=typeof r||r!==Array&&!o(r.prototype)?a(r)&&(r=r[s],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},8418:function(e,t,r){"use strict";var a=r("c04e"),o=r("9bf2"),n=r("5c6c");e.exports=function(e,t,r){var s=a(t);s in e?o.f(e,s,n(0,r)):e[s]=r}},"99af":function(e,t,r){"use strict";var a=r("23e7"),o=r("d039"),n=r("e8b5"),s=r("861d"),i=r("7b0b"),l=r("50c4"),c=r("8418"),d=r("65f0"),u=r("1dde"),f=r("b622"),m=r("2d00"),p=f("isConcatSpreadable"),v=9007199254740991,h="Maximum allowed index exceeded",g=m>=51||!o((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),b=u("concat"),x=function(e){if(!s(e))return!1;var t=e[p];return void 0!==t?!!t:n(e)},y=!g||!b;a({target:"Array",proto:!0,forced:y},{concat:function(e){var t,r,a,o,n,s=i(this),u=d(s,0),f=0;for(t=-1,a=arguments.length;t<a;t++)if(n=-1===t?s:arguments[t],x(n)){if(o=l(n.length),f+o>v)throw TypeError(h);for(r=0;r<o;r++,f++)r in n&&c(u,f,n[r])}else{if(f>=v)throw TypeError(h);c(u,f++,n)}return u.length=f,u}})},a434:function(e,t,r){"use strict";var a=r("23e7"),o=r("23cb"),n=r("a691"),s=r("50c4"),i=r("7b0b"),l=r("65f0"),c=r("8418"),d=r("1dde"),u=d("splice"),f=Math.max,m=Math.min,p=9007199254740991,v="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var r,a,d,u,h,g,b=i(this),x=s(b.length),y=o(e,x),w=arguments.length;if(0===w?r=a=0:1===w?(r=0,a=x-y):(r=w-2,a=m(f(n(t),0),x-y)),x+r-a>p)throw TypeError(v);for(d=l(b,a),u=0;u<a;u++)h=y+u,h in b&&c(d,u,b[h]);if(d.length=a,r<a){for(u=y;u<x-a;u++)h=u+a,g=u+r,h in b?b[g]=b[h]:delete b[g];for(u=x;u>x-a+r;u--)delete b[u-1]}else if(r>a)for(u=x-a;u>y;u--)h=u+a-1,g=u+r-1,h in b?b[g]=b[h]:delete b[g];for(u=0;u<r;u++)b[u+y]=arguments[u+2];return b.length=x-a+r,d}})},a640:function(e,t,r){"use strict";var a=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&a((function(){r.call(null,t||function(){throw 1},1)}))}},b0c0:function(e,t,r){var a=r("83ab"),o=r("9bf2").f,n=Function.prototype,s=n.toString,i=/^\s*function ([^ (]*)/,l="name";a&&!(l in n)&&o(n,l,{configurable:!0,get:function(){try{return s.call(this).match(i)[1]}catch(e){return""}}})},c975:function(e,t,r){"use strict";var a=r("23e7"),o=r("4d64").indexOf,n=r("a640"),s=[].indexOf,i=!!s&&1/[1].indexOf(1,-0)<0,l=n("indexOf");a({target:"Array",proto:!0,forced:i||!l},{indexOf:function(e){return i?s.apply(this,arguments)||0:o(this,e,arguments.length>1?arguments[1]:void 0)}})},d9ca:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"col-md-12"},[r("div",{staticClass:"d-flex justify-space-between"},[r("h2",[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-account-circle")]),e._v("Empresa")],1),r("v-btn",{attrs:{to:"/person/create",rounded:"",color:"primary",dark:""}},[r("v-icon",{staticClass:"mr-1"},[e._v("mdi-plus")]),e._v("Agregar")],1)],1),r("v-card-title",[r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","item-key":"id","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-card-text",[r("v-data-table",{attrs:{headers:e.headers,page:e.page,"hide-default-footer":"",loading:e.loader,"loading-text":"Obteniendo listado de Empresas, Espere...",items:e.users,"items-per-page":e.itemsPerPage,search:e.search},on:{"update:page":function(t){e.page=t},"page-count":function(t){e.pageCount=t}},scopedSlots:e._u([{key:"item.actived",fn:function(t){var a=t.item;return[a.active?r("v-chip",{attrs:{color:"green",dark:"",small:""}},[e._v("Activo ")]):r("v-chip",{attrs:{color:"red",dark:"",small:""}},[e._v("Inactivo ")])]}},{key:"item.action",fn:function(t){var a=t.item;return[r("v-btn",{staticClass:"mr-2",attrs:{"x-small":"",fab:"",color:"primary",elevation:"0",title:"Modificar Persona",to:"/person/"+a._id+"/edit"}},[r("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")])],1),r("v-btn",{attrs:{"x-small":"",fab:"",color:"error",elevation:"0",title:"Eliminar usuario"},on:{click:function(t){return e.deleteUser(a)}}},[r("v-icon",{attrs:{small:""}},[e._v("mdi-delete")])],1)]}}])}),r("div",{staticClass:"text-center pt-2"},[r("v-pagination",{attrs:{length:e.pageCount},on:{input:e.getAllUsers},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)],1),r("Confirm",{ref:"confirm"})],1)},o=[],n=(r("99af"),r("c975"),r("a434"),r("b0c0"),r("d3b7"),r("96cf"),r("1da1")),s=r("2e99"),i={name:"UserList",components:{Confirm:s["a"]},data:function(){return{headers:[{text:"Nombre",value:"name"},{text:"Apellido",value:"lastname"},{text:"Correo",value:"email"},{text:"Rol",value:"role"},{text:"Opciones",value:"action",align:"right",sortable:!1}],search:"",page:1,pageCount:0,itemsPerPage:30,loader:!1,deleteLoader:!1,users:[]}},mounted:function(){this.page=1,this.getAllUsers()},methods:{getAllUsers:function(){var e=this;this.loader=!0,this.$http.get("/users/".concat(this.page)).then((function(t){e.users=t.data.users,e.pageCount=t.data.pages})).catch((function(){e.$alert.err("Upps! no hemos podido obtaner la lista de usuarios, consulte con el administrador")})).finally((function(){e.loader=!1}))},deleteUser:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$refs.confirm.open("Eliminar Cliente","¿Estas seguro que desea eliminar a ".concat(e.name," ").concat(e.lastname," del listado de clientes?"));case 2:if(a=r.sent,a){r.next=5;break}return r.abrupt("return");case 5:t.deleteLoader=!0,t.$http.delete("/eliminar-usuario/".concat(e._id)).then((function(r){if(r.data.status&&"success"===r.data.status){var a=t.users.indexOf(e);t.users.splice(a,1),t.$alert.ok(r.data.message)}})).catch((function(e){return function(){e.response&&e.response.data&&t.$alert.err(e.response.data.message)}})).finally((function(){return t.deleteLoader=!1}));case 7:case"end":return r.stop()}}),r)})))()}}},l=i,c=r("2877"),d=Object(c["a"])(l,a,o,!1,null,"5023011c",null);t["default"]=d.exports},e8b5:function(e,t,r){var a=r("c6b6");e.exports=Array.isArray||function(e){return"Array"==a(e)}}}]);
//# sourceMappingURL=about.cb4c9b6f.js.map