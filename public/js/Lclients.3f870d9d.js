(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Lclients"],{"084a":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"col-md-12"},[n("div",{staticClass:"d-flex justify-space-between"},[n("h2",[n("v-icon",{staticClass:"mr-2"},[e._v("mdi-account-circle")]),e._v("Clientes")],1),n("v-spacer"),n("v-btn",{staticClass:"mr-1",attrs:{rounded:"",color:"green",dark:""}},[n("v-icon",{staticClass:"mr-1"},[e._v("mdi-download")]),e._v("Descargar CSV")],1),n("v-btn",{attrs:{to:"/clients/create",rounded:"",color:"primary",dark:""}},[n("v-icon",{staticClass:"mr-1"},[e._v("mdi-plus")]),e._v("Agregar")],1)],1),n("v-card-title",[n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","item-key":"id","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),n("v-card-text",[n("v-data-table",{attrs:{headers:e.headers,page:e.page,"hide-default-footer":"",loading:e.loader,"loading-text":"Obteniendo listado de Clientes, Espere...",items:e.users,"items-per-page":e.itemsPerPage,search:e.search},on:{"update:page":function(t){e.page=t},"page-count":function(t){e.pageCount=t}},scopedSlots:e._u([{key:"item.actived",fn:function(t){var r=t.item;return[r.active?n("v-chip",{attrs:{color:"green",dark:"",small:""}},[e._v("Activo ")]):n("v-chip",{attrs:{color:"red",dark:"",small:""}},[e._v("Inactivo ")])]}},{key:"item.action",fn:function(t){var r=t.item;return[n("v-btn",{staticClass:"mr-2",attrs:{"x-small":"",fab:"",color:"primary",elevation:"0",title:"Modificar Persona",to:"/clients/"+r._id+"/edit"}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")])],1),n("v-btn",{attrs:{"x-small":"",fab:"",color:"error",elevation:"0",title:"Eliminar usuario"},on:{click:function(t){return e.deleteUser(r)}}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-delete")])],1)]}}])}),n("div",{staticClass:"text-center pt-2"},[n("v-pagination",{attrs:{length:e.pageCount},on:{input:e.getAllUsers},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)],1),n("Confirm",{ref:"confirm"})],1)},a=[],i=(n("99af"),n("c975"),n("a434"),n("b0c0"),n("d3b7"),n("96cf"),n("1da1")),o=n("2e99"),s={name:"UserList",components:{Confirm:o["a"]},data:function(){return{headers:[{text:"Nombre",value:"name"},{text:"Apellido",value:"lastname"},{text:"Correo",value:"email"},{text:"Teléfono",value:"phone"},{text:"Opciones",value:"action",align:"right",sortable:!1}],search:"",page:1,pageCount:0,itemsPerPage:30,loader:!1,deleteLoader:!1,users:[]}},mounted:function(){this.page=1,this.getAllUsers()},methods:{getAllUsers:function(){var e=this;this.loader=!0,this.$http.get("/users/".concat(this.page)).then((function(t){e.users=t.data.users,e.pageCount=t.data.pages})).catch((function(){e.$alert.err("Upps! no hemos podido obtaner la lista de usuarios, consulte con el administrador")})).finally((function(){e.loader=!1}))},deleteUser:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$refs.confirm.open("Eliminar Cliente","¿Estas seguro que desea eliminar a ".concat(e.name," ").concat(e.lastname," del listado de clientes?"));case 2:if(r=n.sent,r){n.next=5;break}return n.abrupt("return");case 5:t.deleteLoader=!0,t.$http.delete("/eliminar-usuario/".concat(e._id)).then((function(n){if(n.data.status&&"success"===n.data.status){var r=t.users.indexOf(e);t.users.splice(r,1),t.$alert.ok(n.data.message)}})).catch((function(e){return function(){e.response&&e.response.data&&t.$alert.err(e.response.data.message)}})).finally((function(){return t.deleteLoader=!1}));case 7:case"end":return n.stop()}}),n)})))()}}},c=s,l=n("2877"),u=Object(l["a"])(c,r,a,!1,null,"8db32054",null);t["default"]=u.exports},"1dde":function(e,t,n){var r=n("d039"),a=n("b622"),i=n("2d00"),o=a("species");e.exports=function(e){return i>=51||!r((function(){var t=[],n=t.constructor={};return n[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"2e99":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{style:{zIndex:e.options.zIndex},attrs:{"max-width":e.options.width},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v(e._s(e.title))]),n("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!e.message,expression:"!!message"}]},[e._v(e._s(e.message))]),n("v-card-actions",{staticClass:"pt-0"},[n("v-spacer"),n("v-btn",{attrs:{color:"red",text:""},nativeOn:{click:function(t){return e.cancel(t)}}},[e._v("Cancelar")]),n("v-btn",{attrs:{color:"primary darken-1",text:""},nativeOn:{click:function(t){return e.agree(t)}}},[e._v("Aceptar")])],1)],1)],1)},a=[],i=(n("d3b7"),{data:function(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"primary",width:350,zIndex:200}}},methods:{open:function(e,t,n){var r=this;return this.dialog=!0,this.title=e,this.message=t,this.options=Object.assign(this.options,n),new Promise((function(e,t){r.resolve=e,r.reject=t}))},agree:function(){this.resolve(!0),this.dialog=!1},cancel:function(){this.resolve(!1),this.dialog=!1}}}),o=i,s=n("2877"),c=Object(s["a"])(o,r,a,!1,null,null,null);t["a"]=c.exports},"65f0":function(e,t,n){var r=n("861d"),a=n("e8b5"),i=n("b622"),o=i("species");e.exports=function(e,t){var n;return a(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?r(n)&&(n=n[o],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},8418:function(e,t,n){"use strict";var r=n("c04e"),a=n("9bf2"),i=n("5c6c");e.exports=function(e,t,n){var o=r(t);o in e?a.f(e,o,i(0,n)):e[o]=n}},"99af":function(e,t,n){"use strict";var r=n("23e7"),a=n("d039"),i=n("e8b5"),o=n("861d"),s=n("7b0b"),c=n("50c4"),l=n("8418"),u=n("65f0"),d=n("1dde"),f=n("b622"),p=n("2d00"),v=f("isConcatSpreadable"),m=9007199254740991,h="Maximum allowed index exceeded",g=p>=51||!a((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),b=d("concat"),x=function(e){if(!o(e))return!1;var t=e[v];return void 0!==t?!!t:i(e)},y=!g||!b;r({target:"Array",proto:!0,forced:y},{concat:function(e){var t,n,r,a,i,o=s(this),d=u(o,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(i=-1===t?o:arguments[t],x(i)){if(a=c(i.length),f+a>m)throw TypeError(h);for(n=0;n<a;n++,f++)n in i&&l(d,f,i[n])}else{if(f>=m)throw TypeError(h);l(d,f++,i)}return d.length=f,d}})},a434:function(e,t,n){"use strict";var r=n("23e7"),a=n("23cb"),i=n("a691"),o=n("50c4"),s=n("7b0b"),c=n("65f0"),l=n("8418"),u=n("1dde"),d=u("splice"),f=Math.max,p=Math.min,v=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var n,r,u,d,h,g,b=s(this),x=o(b.length),y=a(e,x),w=arguments.length;if(0===w?n=r=0:1===w?(n=0,r=x-y):(n=w-2,r=p(f(i(t),0),x-y)),x+n-r>v)throw TypeError(m);for(u=c(b,r),d=0;d<r;d++)h=y+d,h in b&&l(u,d,b[h]);if(u.length=r,n<r){for(d=y;d<x-r;d++)h=d+r,g=d+n,h in b?b[g]=b[h]:delete b[g];for(d=x;d>x-r+n;d--)delete b[d-1]}else if(n>r)for(d=x-r;d>y;d--)h=d+r-1,g=d+n-1,h in b?b[g]=b[h]:delete b[g];for(d=0;d<n;d++)b[d+y]=arguments[d+2];return b.length=x-r+n,u}})},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},b0c0:function(e,t,n){var r=n("83ab"),a=n("9bf2").f,i=Function.prototype,o=i.toString,s=/^\s*function ([^ (]*)/,c="name";r&&!(c in i)&&a(i,c,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(e){return""}}})},c975:function(e,t,n){"use strict";var r=n("23e7"),a=n("4d64").indexOf,i=n("a640"),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0,c=i("indexOf");r({target:"Array",proto:!0,forced:s||!c},{indexOf:function(e){return s?o.apply(this,arguments)||0:a(this,e,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}}}]);
//# sourceMappingURL=Lclients.3f870d9d.js.map